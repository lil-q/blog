<!DOCTYPE html>
<html lang="en-us">

<head>
  <title>计算机网络 | Homeward</title>

  <meta charset="UTF-8">
  <meta name="language" content="en">
  <meta name="description" content="计算机网络基础知识">
  <meta name="keywords" content="web , 计算机网络">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  
  

  <link rel="shortcut icon" type="image/png" href="/favicon.ico" />

  
  
    
 
  
  
  
  
  
  
    
    <link type="text/css" rel="stylesheet" href="/css/post.min.ab05d5e01a9242c9472ee834dca8b5e136420f575e85e4d6d45b56022054489f.css" integrity="sha256-qwXV4BqSQslHLug03Ki14TZCD1deheTW1FtWAiBUSJ8="/>
  
    
    <link type="text/css" rel="stylesheet" href="/css/custom.min.77a2b610aebcb8c1822692584b5194b6ac5bd48772b2578ca5736502faa37189.css" integrity="sha256-d6K2EK68uMGCJpJYS1GUtqxb1IdysleMpXNlAvqjcYk="/>
  
  
   
   
    

<script type="application/ld+json">
  
    {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/lil-q.github.io\/"
      },
      "articleSection" : "blog",
      "name" : "计算机网络",
      "headline" : "计算机网络",
      "description" : "计算机网络基础知识",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "2020",
      "datePublished": "2020-05-05 19:30:17 \u002b0000 UTC",
      "dateModified" : "2020-05-05 19:30:17 \u002b0000 UTC",
      "url" : "https:\/\/lil-q.github.io\/blog\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/",
      "wordCount" : "515",
      "keywords" : ["web", "计算机网络", "Blog"]
    }
  
  </script>
</head>

<body>
  <div class="burger__container">
  <div class="burger" aria-controls="navigation" aria-label="Menu">
    <div class="burger__meat burger__meat--1"></div>
    <div class="burger__meat burger__meat--2"></div>
    <div class="burger__meat burger__meat--3"></div>
  </div>
</div>
 

  <nav class="nav" id="navigation">
  <ul class="nav__list">
    
    
      <li>
        <a  href="/">About</a>
      </li>
    
      <li>
        <a  class="active"
         href="/blog">技术</a>
      </li>
    
      <li>
        <a  href="/picture">相册</a>
      </li>
    
      <li>
        <a  href="/essay">随笔</a>
      </li>
    
  </ul>
</nav>


  <main>
    
    

    <div class="flex-wrapper">
      <div class="post__container">
        <div class="post">
          <header class="post__header">
            <h1 id="post__title">计算机网络</h1>
            <time datetime="2020-05-05 19:30:17 &#43;0000 UTC" class="post__date">May 5 2020</time> 
          </header>
          <article class="post__content">
              
<p>网络把主机连接起来，而互连网（internet）是把多种不同的网络连接起来，因此互连网是网络的网络。</p>
<h2 id="一概述">一、概述<a class="anchor" href="#一概述">#</a></h2>
<h3 id="11-主机之间的通信方式">1.1 主机之间的通信方式<a class="anchor" href="#11-主机之间的通信方式">#</a></h3>
<ul>
<li>
<p>客户-服务器（C/S）：客户是服务的请求方，服务器是服务的提供方。</p>
</li>
<li>
<p>对等（P2P）：不区分客户和服务器。</p>
</li>
</ul>
<h3 id="12-报文交换">1.2 报文交换<a class="anchor" href="#12-报文交换">#</a></h3>
<ul>
<li>电路交换：整个报文的比特流连续地从源点直达终点，好像在一个管道中传送一样。</li>
<li>报文交换：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。</li>
<li>分组交换：单个分组（如p1，整个报文的一部分）传送到相邻结点，存储下来后查找转发表，转达到下一个结点。</li>
</ul>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/after5.5/web1.png" alt=""></p>
<h3 id="13-时延">1.3 时延<a class="anchor" href="#13-时延">#</a></h3>
<p>总时延 = 排队时延 + 处理时延 + 传输时延 + 传播时延</p>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/after5.5/web2.png" alt=""></p>
<h4 id="1-排队时延"><strong>1. 排队时延</strong></h4>
<p>分组在路由器的输入队列和输出队列中排队等待的时间，取决于网络当前的通信量。</p>
<h4 id="2-处理时延"><strong>2. 处理时延</strong></h4>
<p>主机或路由器收到分组时进行处理所需要的时间，例如分析首部、从分组中提取数据、进行差错检验或查找适当的路由等。</p>
<h4 id="3-传输时延"><strong>3. 传输时延</strong></h4>
<p>主机或路由器传输数据帧所需要的时间。</p>
<h4 id="4-传播时延"><strong>4. 传播时延</strong></h4>
<p>电磁波在信道中传播所需要花费的时间，电磁波传播的速度接近光速。</p>
<h3 id="14-体系结构">1.4 体系结构<a class="anchor" href="#14-体系结构">#</a></h3>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/after5.5/web3.png"  /></p>
<ul>
<li><strong>应用层</strong> ：为特定应用程序提供数据传输服务，例如 HTTP、DNS 等协议。数据单位为报文。</li>
<li><strong>传输层</strong> ：为进程提供通用数据传输服务。由于应用层协议很多，定义通用的传输层协议就可以支持不断增多的应用层协议。运输层包括两种协议：传输控制协议 TCP，提供面向连接、可靠的数据传输服务，数据单位为报文段；用户数据报协议 UDP，提供无连接、尽最大努力的数据传输服务，数据单位为用户数据报。TCP 主要提供完整性服务，UDP 主要提供及时性服务。</li>
<li><strong>网络层</strong> ：为主机提供数据传输服务。而传输层协议是为主机中的进程提供数据传输服务。网络层把传输层传递下来的报文段或者用户数据报封装成分组。</li>
<li><strong>数据链路层</strong> ：网络层针对的还是主机之间的数据传输服务，而主机之间可以有很多链路，链路层协议就是为同一链路的主机提供数据传输服务。数据链路层把网络层传下来的分组封装成帧。</li>
<li><strong>物理层</strong> ：考虑的是怎样在传输媒体上传输数据比特流，而不是指具体的传输媒体。物理层的作用是尽可能屏蔽传输媒体和通信手段的差异，使数据链路层感觉不到这些差异。</li>
</ul>
<h4 id="1-协议">1. 协议</h4>
<p>为进行网络中的数据交换而建立的规则、标准或约定称为网络协议。</p>
<p>其中表示层和会话层用途如下：</p>
<ul>
<li><strong>表示层</strong> ：数据压缩、加密以及数据描述，这使得应用程序不必关心在各台主机中数据内部格式不同的问题。</li>
<li><strong>会话层</strong> ：建立及管理会话。</li>
</ul>
<p>五层协议没有表示层和会话层，而是将这些功能留给应用程序开发者处。</p>
<h4 id="2-tcpip">2. TCP/IP</h4>
<p>它只有四层，相当于五层协议中数据链路层和物理层合并为网络接口层。</p>
<p>TCP/IP 体系结构不严格遵循 OSI 分层概念，应用层可能会直接使用 IP 层或者网络接口层。</p>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/after5.5/web4.png" alt="img" style="zoom:67%;" /></p>
<h4 id="3-数据在各层之间的传递过程">3. 数据在各层之间的传递过程</h4>
<p>在向下的过程中，需要添加下层协议所需要的首部或者尾部，而在向上的过程中不断拆开首部和尾部。</p>
<p>路由器只有下面三层协议，因为路由器位于网络核心中，不需要为进程或者应用程序提供服务，因此也就不需要传输层和应用层。</p>
<h3 id="15-网站访问全过程">1.5 网站访问全过程<a class="anchor" href="#15-网站访问全过程">#</a></h3>
<h4 id="1-事件顺序">1. 事件顺序</h4>
<ol>
<li>浏览器获取输入的<strong>域名</strong>；</li>
<li>浏览器向<strong>域名系统DNS</strong>请求解析域名的<strong>IP地址</strong> ；</li>
<li><strong>DNS</strong>解析出网站服务器的<strong>IP地址</strong> ；</li>
<li>浏览器与该服务器建立<strong>TCP连接</strong>(默认端口号80) ；</li>
<li>浏览器发出<strong>HTTP请求</strong>，请求网站首页；</li>
<li>服务器通过<strong>HTTP响应</strong>把首页文件发送给浏览器；</li>
<li><strong>TCP连接</strong>释放；</li>
<li><strong>浏览器</strong>将首页文件进行解析，并将Web页显示给用户。</li>
</ol>
<h4 id="2-涉及到的协议">2. 涉及到的协议</h4>
<ol>
<li>应用层：<strong>HTTP</strong>(WWW访问协议)，<strong>DNS</strong>(域名解析服务) ；</li>
<li>传输层：<strong>TCP</strong>(为HTTP提供可靠的数据传输)，<strong>UDP</strong>(DNS使用UDP传输)；</li>
<li>网络层：<strong>IP</strong>(IP数据数据包传输和路由选择)，<strong>ICMP</strong>(提供网络传输过程中的差错检测)，<strong>ARP</strong>(将本机的默认网关IP地址映射成物理MAC地址)</li>
</ol>
<h2 id="二链路层">二、链路层<a class="anchor" href="#二链路层">#</a></h2>
<h4 id="1-封装成帧">1. 封装成帧</h4>
<p>将网络层传下来的分组添加<strong>首部和尾部</strong>，用于标记帧的开始和结束。</p>
<h4 id="2-透明传输">2. 透明传输</h4>
<p>透明表示一个实际存在的事物看起来好像不存在一样。</p>
<p>帧使用<strong>首部和尾部进行定界</strong>，如果帧的数据部分含有和首部尾部相同的内容，那么帧的开始和结束位置就会被错误的判定。需要在数据部分出现首部尾部相同的内容前面插入转义字符。如果数据部分出现转义字符，那么就在转义字符前面再加个转义字符。在接收端进行处理之后可以还原出原始数据。这个过程透明传输的内容是转义字符，用户察觉不到转义字符的存在。</p>
<h4 id="3-差错检测">3. 差错检测</h4>
<p>目前数据链路层广泛使用了**循环冗余检验（CRC）**来检查比特差错。</p>
<h3 id="21-信道分类">2.1 信道分类<a class="anchor" href="#21-信道分类">#</a></h3>
<h4 id="1-广播信道">1. 广播信道</h4>
<p><strong>一对多通信</strong>，一个节点发送的数据能够被广播信道上所有的节点接收到。</p>
<p>所有的节点都在同一个广播信道上发送数据，因此需要有专门的控制方法进行协调，避免发生冲突（冲突也叫碰撞）。</p>
<p>主要有两种控制方法进行协调，一个是使用信道复用技术，一是使用 CSMA/CD 协议。</p>
<h4 id="2-点对点信道">2. 点对点信道</h4>
<p><strong>一对一通信</strong>，因为不会发生碰撞，因此也比较简单，使用 PPP 协议进行控制。</p>
<h3 id="22-csmacd-协议">2.2 CSMA/CD 协议<a class="anchor" href="#22-csmacd-协议">#</a></h3>
<p>CSMA/CD 表示载波监听多点接入 / 碰撞检测。</p>
<ul>
<li><strong>多点接入</strong> ：说明这是<strong>总线型网络</strong>，许多主机以多点的方式连接到总线上。</li>
<li><strong>载波监听</strong> ：每个主机都必须不停地监听信道。在发送前，如果监听到信道正在使用，就必须等待。</li>
<li><strong>碰撞检测</strong> ：在发送中，如果监听到信道已有其它主机正在发送数据，就表示发生了碰撞。虽然每个主机在发送数据之前都已经监听到信道为空闲，但是由于电磁波的传播时延的存在，还是有可能会发生碰撞。</li>
</ul>
<p>记端到端的传播时延为 τ，最先发送的站点最多经过 2τ 就可以知道是否发生了碰撞，称 2τ 为 <strong>争用期</strong> 。只有经过争用期之后还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</p>
<p>当发生碰撞时，站点要停止发送，等待一段时间再发送。这个时间采用 <strong>截断二进制指数退避算法</strong> 来确定。从离散的整数集合 {0, 1, .., (2k-1)} 中随机取出一个数，记作 r，然后取 r 倍的争用期作为重传等待时间。</p>
<h3 id="23-ppp-协议">2.3 PPP 协议<a class="anchor" href="#23-ppp-协议">#</a></h3>
<p>互联网用户通常需要连接到某个 ISP 之后才能接入到互联网，PPP 协议是用户计算机和 ISP 进行通信时所使用的数据链路层协议。</p>
<h3 id="24-mac-地址">2.4 MAC 地址<a class="anchor" href="#24-mac-地址">#</a></h3>
<p>MAC 地址是链路层地址，长度为 6 字节（48 位），用于唯一标识网络适配器（网卡）。</p>
<p>一台主机拥有多少个网络适配器就有多少个 MAC 地址。例如笔记本电脑普遍存在无线网络适配器和有线网络适配器，因此就有两个 MAC 地址。</p>
<h2 id="三网络层">三、网络层<a class="anchor" href="#三网络层">#</a></h2>
<p>IP 地址的编址方式经历了三个历史阶段：</p>
<ul>
<li>分类：{&lt; 网络号 &gt;, &lt; 主机号 &gt;}</li>
<li>子网划分：{&lt; 网络号 &gt;, &lt; 子网号 &gt;, &lt; 主机号 &gt;}</li>
<li>无分类：{&lt; 网络前缀号 &gt;, &lt; 主机号 &gt;}</li>
</ul>
<h3 id="31-地址解析协议-arp">3.1 地址解析协议 ARP<a class="anchor" href="#31-地址解析协议-arp">#</a></h3>
<p>网络层实现主机之间的通信，而链路层实现具体每段链路之间的通信。因此在通信过程中，IP 数据报的源地址和目的地址始终不变，而 MAC 地址随着链路的改变而改变。</p>
<p>每个主机都有一个 ARP 高速缓存，里面有本局域网上的各主机和路由器的 <strong>IP 地址到 MAC 地址</strong>的映射表。</p>
<p>如果主机 A 知道主机 B 的 IP 地址，但是 ARP 高速缓存中没有该 IP 地址到 MAC 地址的映射，此时主机 A 通过<strong>广播</strong>的方式发送 ARP 请求分组，主机 B 收到该请求后会发送 ARP 响应分组给主机 A 告知其 MAC 地址，随后主机 A 向其高速缓存中写入主机 B 的 IP 地址到 MAC 地址的映射。</p>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/after5.5/web5.png" alt=""></p>
<h3 id="32-网际控制报文协议-icmp">3.2 网际控制报文协议 ICMP<a class="anchor" href="#32-网际控制报文协议-icmp">#</a></h3>
<p>ICMP 是为了更有效地转发 IP 数据报和提高交付成功的机会。它封装在 IP 数据报中，但是不属于高层协议。</p>
<h3 id="33-虚拟专用网vpn">3.3 虚拟专用网VPN<a class="anchor" href="#33-虚拟专用网vpn">#</a></h3>
<p>由于 IP 地址的紧缺，一个机构能申请到的 IP 地址数往往远小于本机构所拥有的主机数。并且一个机构并不需要把所有的主机接入到外部的互联网中，机构内的计算机可以使用仅在本机构有效的 IP 地址（专用地址）。</p>
<p>VPN 使用公用的互联网作为本机构各专用网之间的通信载体。专用指机构内的主机只与本机构内的其它主机通信；虚拟指实际上并不是物理上的专用网，而是经过公用的互联网并加密实现的。</p>
<p><strong>网络地址转换 NAT</strong></p>
<p>专用网内部的主机使用本地 IP 地址又想和互联网上的主机通信时，可以使用 NAT 来将本地 IP 转换为全球 IP。</p>
<h3 id="34-路由器">3.4 路由器<a class="anchor" href="#34-路由器">#</a></h3>
<p>路由器从功能上可以划分为：路由选择和分组转发。</p>
<p>分组转发结构由三个部分组成：交换结构、一组输入端口和一组输出端口。</p>
<p><strong>路由器分组转发流程</strong></p>
<ul>
<li>从数据报的首部提取目的主机的 IP 地址 D，得到目的网络地址 N。</li>
<li>若 N 就是与此路由器直接相连的某个网络地址，则进行直接交付；</li>
<li>若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给表中所指明的下一跳路由器；</li>
<li>若路由表中有到达网络 N 的路由，则把数据报传送给路由表中所指明的下一跳路由器；</li>
<li>若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；</li>
<li>报告转发分组出错。</li>
</ul>
<h2 id="四传输层">四、传输层<a class="anchor" href="#四传输层">#</a></h2>
<p><strong>UDP 和 TCP 的特点</strong></p>
<ul>
<li>用户数据报协议 UDP（User Datagram Protocol）是<strong>无连接</strong>的，尽<strong>最大可能</strong>交付，<strong>没有拥塞控制</strong>，<strong>面向报文</strong>（对于应用程序传下来的报文不合并也不拆分，只是添加 UDP 首部），支持<strong>一对一</strong>、<strong>一对多</strong>、<strong>多对一</strong>和<strong>多对多</strong>的交互通信。</li>
<li>传输控制协议 TCP（Transmission Control Protocol）是<strong>面向连接</strong>的，提供<strong>可靠</strong>交付，有<strong>流量控制</strong>，<strong>拥塞控制</strong>，提供<strong>全双工通信</strong>，<strong>面向字节流</strong>（把应用层传下来的报文看成字节流，把字节流组织成大小不等的数据块），每一条 TCP 连接只能是<strong>点对点</strong>的（一对一）。</li>
</ul>
<h3 id="41-tcp三次握手">4.1 TCP三次握手<a class="anchor" href="#41-tcp三次握手">#</a></h3>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/after5.5/web6.png" alt=""></p>
<ul>
<li>首先服务器处于 LISTEN（监听）状态，等待客户的连接请求。</li>
<li>客户端向服务器发送连接请求报文，SYN=1，ACK=0，选择一个初始的序号 x。</li>
<li>服务器收到连接请求报文，如果同意建立连接，则向客户端发送连接确认报文，SYN=1，ACK=1，确认号为 x+1，同时也选择一个初始的序号 y。</li>
<li>客户端收到服务器的连接确认报文后，还要向服务器发出确认，确认号为 y+1，序号为 x+1。</li>
<li>服务器收到客户端的确认后，连接建立。</li>
</ul>
<p><strong>三次握手的原因</strong></p>
<p>第三次握手是为了防止失效的连接请求到达服务器，让服务器<strong>错误打开重复连接</strong>。</p>
<p>客户端发送的连接请求如果在网络中滞留，那么就会隔很长一段时间才能收到服务器端发回的连接确认。客户端等待一个超时重传时间之后，就会重新请求连接。但是这个滞留的连接请求最后还是会到达服务器，如果不进行三次握手，那么服务器就会打开两个连接。如果有第三次握手，客户端会忽略服务器之后发送的对滞留连接请求的连接确认，不进行第三次握手，因此就不会再次打开连接。</p>
<h3 id="42-tcp-的四次挥手">4.2 TCP 的四次挥手<a class="anchor" href="#42-tcp-的四次挥手">#</a></h3>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/after5.5/web7.png" alt=""></p>
<p>序号和确认号的规则比较简单； ACK 在连接建立之后都为 1。</p>
<ul>
<li>客户端发送连接释放报文，FIN=1。</li>
<li>服务器收到之后发出确认，此时 TCP 属于半关闭状态，服务器能向客户端发送数据但是客户端不能向服务器发送数据。</li>
<li>当服务器不再需要连接时，发送连接释放报文，FIN=1。</li>
<li>客户端收到后发出确认，进入 TIME-WAIT 状态，等待 2 MSL（最大报文存活时间）后释放连接。</li>
<li>服务器收到客户端的确认后释放连接。</li>
</ul>
<p><strong>四次挥手的原因</strong></p>
<p>客户端发送了 FIN 连接释放报文之后，服务器收到了这个报文，就进入了 CLOSE-WAIT 状态。这个状态是为了让<strong>服务器端发送还未传送完毕的数据</strong>，传送完毕之后，服务器会发送 FIN 连接释放报文。</p>
<p><strong>TIME_WAIT</strong></p>
<p>客户端接收到服务器端的 FIN 报文后进入此状态，此时并不是直接进入 CLOSED 状态，还需要等待一个时间计时器设置的时间 2MSL（<em>Maximum Segment Lifetime</em>，报文最大生存时间）。这么做有两个理由：</p>
<ul>
<li>确保最后一个确认报文能够到达。如果服务器没收到客户端发送来的确认报文，那么就会重新发送连接释放请求报文，客户端等待一段时间就是为了处理这种情况的发生。</li>
<li>等待一段时间是为了让本连接持续时间内所产生的所有报文都从网络中消失，使得下一个新的连接不会出现旧的连接请求报文。</li>
</ul>
<h3 id="43-tcp-流量控制">4.3 TCP 流量控制<a class="anchor" href="#43-tcp-流量控制">#</a></h3>
<p>流量控制是为了控制发送方发送速率，保证接收方来得及接收。</p>
<p>接收方发送的确认报文中的窗口字段可以用来控制发送方窗口大小，从而影响发送方的发送速率。将窗口字段设置为 0，则发送方不能发送数据。</p>
<h3 id="44-tcp-拥塞控制">4.4 TCP 拥塞控制<a class="anchor" href="#44-tcp-拥塞控制">#</a></h3>
<p>如果网络出现拥塞，分组将会丢失，此时发送方会继续重传，从而导致网络拥塞程度更高。因此当出现拥塞时，应当控制发送方的速率。这一点和流量控制很像，但是出发点不同。流量控制是为了让接收方能来得及接收，而拥塞控制是为了降低整个网络的拥塞程度。</p>
<p>TCP 主要通过四个算法来进行拥塞控制：慢开始、拥塞避免、快重传、快恢复。</p>
<p>发送方需要维护一个叫做拥塞窗口（cwnd）的状态变量，注意拥塞窗口与发送方窗口的区别：拥塞窗口只是一个状态变量，实际决定发送方能发送多少数据的是发送方窗口。</p>
<h4 id="1-慢开始">1. 慢开始</h4>
<p>发送的最初执行慢开始，令 cwnd = 1，发送方只能发送 1 个报文段；当收到确认后，将 cwnd 加倍，因此之后发送方能够发送的报文段数量为：2、4、8 &hellip;</p>
<h4 id="2-拥塞避免">2. 拥塞避免</h4>
<p>注意到慢开始每个轮次都将 cwnd 加倍，这样会让 cwnd 增长速度非常快，从而使得发送方发送的速度增长速度过快，网络拥塞的可能性也就更高。设置一个慢开始门限 ssthresh，当 cwnd &gt;= ssthresh 时，进入拥塞避免，每个轮次只将 cwnd 加 1。</p>
<p>如果出现了超时，则令 ssthresh = cwnd / 2，然后重新执行慢开始。</p>
<h4 id="3-快重传">3. 快重传</h4>
<p>在接收方，要求每次接收到报文段都应该对最后一个已收到的有序报文段进行确认。例如已经接收到 M1 和 M2，此时收到 M4，应当发送对 M2 的确认。</p>
<p>在发送方，如果收到三个重复确认，那么可以知道下一个报文段丢失，此时执行快重传，立即重传下一个报文段。例如收到三个 M2，则 M3 丢失，立即重传 M3。</p>
<h4 id="4-快恢复">4. 快恢复</h4>
<p>在这种情况下，只是丢失个别报文段，而不是网络拥塞。因此执行快恢复，令 ssthresh = cwnd / 2 ，cwnd = ssthresh，注意到此时直接进入拥塞避免。</p>
<p>慢开始和快恢复的快慢指的是 cwnd 的设定值，而不是 cwnd 的增长速率。慢开始 cwnd 设定为 1，而快恢复 cwnd 设定为 ssthresh。</p>
<h3 id="45-mtu--mss">4.5 MTU &amp; MSS<a class="anchor" href="#45-mtu--mss">#</a></h3>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/june/webnew1.png" alt="mssmtu"></p>
<p><strong>最大传输单元</strong>（<strong>M</strong>aximum <strong>T</strong>ransmission <strong>U</strong>nit，<strong>MTU</strong>）：在 TCP/IP 协议族中，指的是 <strong>IP 数据报</strong>能经过一个<strong>物理网络</strong>的最大报文长度，其中包括了 IP 首部(从 20 个字节到 60 个字节不等)，一般以太网的 MTU 设为 1500 bytes，如果数据大于 1500 bytes，需要分片才能完成发送，这些分片有一个共同点，即 IP Header ID 相同。</p>
<p><strong>最大报文段大小</strong>（<strong>M</strong>aximum <strong>S</strong>egment <strong>S</strong>ize，<strong>MSS</strong>）：指的是 <strong>TCP</strong> 提交给 <strong>IP 层</strong>的最大数据报长度，其中不包括 TCP 首部长度。<strong>MSS 由 TCP 链接的过程中由双方协商得出</strong>（取较小值），其中 SYN 字段中的选项部分包括了这个信息。如果 MSS + TCP 首部 + IP 首部大于 MTU，那么 IP 报文就会分片，如果小于，那么就可以不需要分片正常发送。</p>
<p><strong>IP</strong> 和 <strong>TCP</strong> 具有分片的能力，而 UDP 没有，比如应用层中的 DNS 协议在发现报文大于 512 字节时会使用 TCP 来传输。</p>
<h2 id="参考">参考<a class="anchor" href="#参考">#</a></h2>
<ol>
<li><a href="https://www.imperva.com/blog/mtu-mss-explained/">MTU &amp; MSS</a></li>
<li><a href="https://www.zhihu.com/question/68641339">关于分片</a></li>
</ol>


              
          </article>
          

<ul class="tags__list">
    
    <li class="tag__item">
        <a class="tag__link" href="https://lil-q.github.io/tags/basis/">basis</a>
    </li>
    <li class="tag__item">
        <a class="tag__link" href="https://lil-q.github.io/tags/web/">web</a>
    </li></ul>

 <div class="pagination">
  
    <a class="pagination__item" href="https://lil-q.github.io/blog/morris%E7%AE%97%E6%B3%95/">
        <span class="pagination__label">Previous Post</span>
        <span class="pagination__title">Morris 算法</span>
    </a>
  

  
    <a class="pagination__item" href="https://lil-q.github.io/blog/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
      <span class="pagination__label">Next Post</span>
      <span class="pagination__title" >操作系统</a>
    </a>
  
</div>

          
          <footer class="post__footer">
            


<div class="social-icons">
  
     
    
  
     
    
      <a class="social-icons__link" title="GitHub"
         href="https://github.com/lil-q"
         target="_blank" rel="noopener">
        <div class="social-icons__icon" style="background-image: url('https://lil-q.github.io/svg/github.svg')"></div>
      </a>
    
  
     
    
      <a class="social-icons__link" title="Email"
         href="mailto:qitiantianc137@outlook.com"
         target="_blank" rel="noopener">
        <div class="social-icons__icon" style="background-image: url('https://lil-q.github.io/svg/email.svg')"></div>
      </a>
    
     
</div>

            <p>© 2020</p>
          </footer>
          </div>
      </div>
      
      <div class="toc-container">
          
        <nav id="TableOfContents">
  <ul>
    <li><a href="#一概述">一、概述</a>
      <ul>
        <li><a href="#11-主机之间的通信方式">1.1 主机之间的通信方式</a></li>
        <li><a href="#12-报文交换">1.2 报文交换</a></li>
        <li><a href="#13-时延">1.3 时延</a></li>
        <li><a href="#14-体系结构">1.4 体系结构</a></li>
        <li><a href="#15-网站访问全过程">1.5 网站访问全过程</a></li>
      </ul>
    </li>
    <li><a href="#二链路层">二、链路层</a>
      <ul>
        <li></li>
        <li><a href="#21-信道分类">2.1 信道分类</a></li>
        <li><a href="#22-csmacd-协议">2.2 CSMA/CD 协议</a></li>
        <li><a href="#23-ppp-协议">2.3 PPP 协议</a></li>
        <li><a href="#24-mac-地址">2.4 MAC 地址</a></li>
      </ul>
    </li>
    <li><a href="#三网络层">三、网络层</a>
      <ul>
        <li><a href="#31-地址解析协议-arp">3.1 地址解析协议 ARP</a></li>
        <li><a href="#32-网际控制报文协议-icmp">3.2 网际控制报文协议 ICMP</a></li>
        <li><a href="#33-虚拟专用网vpn">3.3 虚拟专用网VPN</a></li>
        <li><a href="#34-路由器">3.4 路由器</a></li>
      </ul>
    </li>
    <li><a href="#四传输层">四、传输层</a>
      <ul>
        <li><a href="#41-tcp三次握手">4.1 TCP三次握手</a></li>
        <li><a href="#42-tcp-的四次挥手">4.2 TCP 的四次挥手</a></li>
        <li><a href="#43-tcp-流量控制">4.3 TCP 流量控制</a></li>
        <li><a href="#44-tcp-拥塞控制">4.4 TCP 拥塞控制</a></li>
        <li><a href="#45-mtu--mss">4.5 MTU &amp; MSS</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>
      </div>
      
    </div>
    

  </main>

   

  
  <script src="/js/index.min.49e4d8a384357d9b445b87371863419937ede9fa77737522ffb633073aebfa44.js" integrity="sha256-SeTYo4Q1fZtEW4c3GGNBmTft6fp3c3Ui/7YzBzrr&#43;kQ=" crossorigin="anonymous"></script>
  
  
  <script src="https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js"></script>

  
  <script src="https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"
    data-autoloader-path="https://unpkg.com/prismjs@1.20.0/components/"></script>

  
    <script src="/js/table-of-contents.js"></script>
  


</body>

</html>
