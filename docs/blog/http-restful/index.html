<!DOCTYPE html>
<html lang="en-us">

<head>
  <title>HTTP &amp; RESTful | Homeward</title>

  <meta charset="UTF-8">
  <meta name="language" content="en">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  
  

  <link rel="shortcut icon" type="image/png" href="/favicon.ico" />


  
  
    
 
  
  
  
  
  
  
    
    <link type="text/css" rel="stylesheet" href="/css/post.min.b60e0932fe1c50c3d7c5b4f83ee9e4592363654d0f2abf05bbd0678d5b8a214c.css" integrity="sha256-tg4JMv4cUMPXxbT4PunkWSNjZU0PKr8Fu9BnjVuKIUw="/>
  
    
    <link type="text/css" rel="stylesheet" href="/css/custom.min.c5ef497d90dc0c27f701423d4e325f3554e96d4e1abff4d3ee7837902f51c1bb.css" integrity="sha256-xe9JfZDcDCf3AUI9TjJfNVTpbU4av/TT7ng3kC9Rwbs="/>
  
  
   
   
    

<script type="application/ld+json">
  
    {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/lil-q.github.io\/"
      },
      "articleSection" : "blog",
      "name" : "HTTP \u0026 RESTful",
      "headline" : "HTTP \u0026 RESTful",
      "description" : "",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "2020",
      "datePublished": "2020-07-23 09:46:01 \u002b0000 UTC",
      "dateModified" : "2020-07-23 09:46:01 \u002b0000 UTC",
      "url" : "https:\/\/lil-q.github.io\/blog\/http-restful\/",
      "wordCount" : "279",
      "keywords" : ["Blog"]
    }
  
  </script>
</head>

<body>
  <div class="burger__container">
  <div class="burger" aria-controls="navigation" aria-label="Menu">
    <div class="burger__meat burger__meat--1"></div>
    <div class="burger__meat burger__meat--2"></div>
    <div class="burger__meat burger__meat--3"></div>
  </div>
</div>
 

  <nav class="nav" id="navigation">
  <ul class="nav__list">
    
    
      <li>
        <a  href="/">主页</a>
      </li>
    
      <li>
        <a  class="active"
         href="/blog">技术</a>
      </li>
    
      <li>
        <a  href="/picture">相册</a>
      </li>
    
  </ul>
</nav>


  <main>
    
    

    <div class="flex-wrapper">
      <div class="post__container">
        <div class="post">
          <header class="post__header">
            <h1 id="post__title">HTTP &amp; RESTful</h1>
            <time datetime="2020-07-23 09:46:01 &#43;0000 UTC" class="post__date">Jul 23 2020</time> 
          </header>
          <article class="post__content">
              
<p><strong>H</strong>yper<strong>T</strong>ext <strong>T</strong>ransfer <strong>P</strong>rotocol &amp; <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer</p>
<h2 id="一概述">一、概述<a class="anchor" href="#一概述">#</a></h2>
<p><strong>超文本传输协议</strong>（HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议。HTTP是万维网的数据通信的基础。</p>
<p><strong>表现层状态转换</strong>（REST）本身并没有创造新的技术、组件或服务，而隐藏在 RESTful 背后的理念就是使用 Web 的现有特征和能力， 更好地使用现有 Web 标准中的一些准则和约束。虽然 REST 本身受 Web 技术的影响很深， 但是理论上 REST 架构风格并不是绑定在 HTTP 上，只不过目前 HTTP 是唯一与 REST 相关的实例。</p>
<h3 id="11-uri">1.1 URI<a class="anchor" href="#11-uri">#</a></h3>
<p><strong>统一资源标识符</strong>（<strong>U</strong>niform <strong>R</strong>esource <strong>I</strong>dentifier，<strong>URI</strong>）是一个用于标识某一互联网资源名称的字符串。URI的最常见的形式是<strong>统一资源定位符</strong>（<strong>U</strong>niform <strong>R</strong>esource <strong>L</strong>ocator，<strong>URL</strong>），经常指定为非正式的网址。更罕见的用法是统一资源名称（<strong>U</strong>niform <strong>R</strong>esource <strong>N</strong>ame，<strong>URN</strong>），其目的是通过提供一种途径。用于在特定的<strong>名字空间</strong>资源的标识，以补充网址。在RESTful架构中 <strong>URI 不应该有动词，动词应该放在HTTP协议中</strong>。</p>
<p><strong>资源</strong>是一种信息实体，它可以有多种外在表现形式。“资源” 具体呈现出来的形式，叫做它的 &ldquo;表现层&rdquo;（Representation）。URI只代表资源的实体，不代表它的形式。严格地说，有些网址最后的 &ldquo;.html&rdquo; 后缀名是不必要的，因为这个后缀名表示格式，属于 &ldquo;表现层&rdquo; 范畴，而 URI 应该只代表 &ldquo;资源&rdquo; 的<strong>位置</strong>。它的具体表现形式，应该在 HTTP 请求的<strong>头信息</strong>中用 <strong>Accept</strong> 和 <strong>Content-Type</strong> 字段指定，这两个字段才是对 &ldquo;表现层&rdquo; 的描述。</p>
<p>因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个 URI。版本号可以在 HTTP 请求头信息的 Accept 字段中进行区分（参见<a href="http://www.informit.com/articles/article.aspx?p=1566460" 
  
   target="_blank" rel="noreferrer noopener" 
>Versioning REST Services</a>
）：</p>
<h3 id="12-如何理解-restful">1.2 如何理解 RESTful<a class="anchor" href="#12-如何理解-restful">#</a></h3>
<p>REST 本身受 Web 技术的影响很深，可以借助 WEB 来理解 RESTful。网站是采用<strong>客户端/服务器</strong>模式，建立在分布式体系上，通过互联网通信，具有高延时（high latency）、高并发等特点的一种软件。<strong>表现层</strong>（Representation）的含义是把<strong>资源</strong>具体的形式呈现出来。表现层上的网站交互就是客户端获取或修改服务器端储存的资源，而这些获取或修改的操作就是资源的状态转换。具体的实现很简单</p>
<ul>
<li>用<strong>名词</strong>（<strong>URL</strong>）表示<strong>资源</strong>；</li>
<li>用<strong>动词</strong>（<strong>GET</strong> / <strong>POST</strong> / <strong>PUT</strong> / <strong>DELETE</strong>）表示对<strong>资源状态的转换</strong>：</li>
</ul>
<p>比如在使用 spring boot 实现一个 WEB 应用时：</p>
<pre><code class="language-java">// 查询所有记录
@RequestMapping(value = &quot;/users&quot;, method = RequestMethod.GET)
@ResponseBody
public Result&lt;List&lt;User&gt;&gt; queryAll() {
    
}

// 新增一条记录
@RequestMapping(value = &quot;/users&quot;, method = RequestMethod.POST)
@ResponseBody
public Result&lt;Boolean&gt; insert(@RequestBody User user) {
    
}

// 修改一条记录
@RequestMapping(value = &quot;/users&quot;, method = RequestMethod.PUT)
@ResponseBody
public Result&lt;Boolean&gt; update(@RequestBody User tempUser) {
    
}
</code></pre>
<p>对于同一个 URL ，即同一个资源，通过不同的请求来改变资源状态。</p>
<h2 id="二请求">二、请求<a class="anchor" href="#二请求">#</a></h2>
<p>客户端发送的 <strong>请求报文</strong> 第一行为请求行，包含了方法字段。</p>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/june/HTTP1.png" alt=""></p>
<p>RESTful 架构应该遵循统一接口原则，统一接口包含了一组受限的预定义的操作，不论什么样的资源，都是通过使用相同的接口进行资源的访问。接口应该使用标准的 HTTP 方法如 GET，PUT 和 POST，并遵循这些方法的语义。如果按照 HTTP 方法的语义来暴露资源，那么接口将会拥有安全性和幂等性的特性：</p>
<ul>
<li>安全性：无论请求多少次，都不会改变服务器状态；</li>
<li>幂等性：无论对资源操作多少次， 结果总是一样的，后面的请求并不会产生比第一次更多的影响。</li>
</ul>
<table>
<thead>
<tr>
<th align="left">HTTP 方法</th>
<th>作用</th>
<th align="left">Idempotent</th>
<th align="left">Safe</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">OPTIONS</td>
<td>查询支持的方法</td>
<td align="left">yes</td>
<td align="left">yes</td>
<td>查询指定的 URL 能够支持的方法</td>
</tr>
<tr>
<td align="left"><strong>GET</strong></td>
<td>获取资源</td>
<td align="left">yes</td>
<td align="left">yes</td>
<td>网络请求中，绝大部分使用的是 GET 方法</td>
</tr>
<tr>
<td align="left">HEAD</td>
<td>获取报文首部</td>
<td align="left">yes</td>
<td align="left">yes</td>
<td>主要用于确认 URL 的有效性以及资源更新的日期时间等</td>
</tr>
<tr>
<td align="left"><strong>PUT</strong></td>
<td>上传文件</td>
<td align="left">yes</td>
<td align="left">no</td>
<td>不带验证机制</td>
</tr>
<tr>
<td align="left"><strong>POST</strong></td>
<td>传输实体主体</td>
<td align="left">no</td>
<td align="left">no</td>
<td>PUT 和 DELETE 不可缓存，POST 在多数情况下不可缓存</td>
</tr>
<tr>
<td align="left"><strong>DELETE</strong></td>
<td>删除文件</td>
<td align="left">yes</td>
<td align="left">no</td>
<td>不带验证机制</td>
</tr>
<tr>
<td align="left">PATCH</td>
<td>对资源进行部分修改</td>
<td align="left">no</td>
<td align="left">no</td>
<td>PUT 用于完全代替；PATCH 用于部分修改</td>
</tr>
</tbody>
</table>
<p>客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：<strong>GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。</strong></p>
<h2 id="三响应">三、响应<a class="anchor" href="#三响应">#</a></h2>
<p>服务器返回的 <strong>响应报文</strong> 中第一行为状态行，包含了状态码以及原因短语，用来告知客户端请求的结果。</p>
<p><img src="https://qttblog.oss-cn-hangzhou.aliyuncs.com/june/HTTP2.png" alt=""></p>
<p>访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，必然涉及到数据和状态的变化。状态码及其含义如下：</p>
<br>
<table>
<thead>
<tr>
<th>状态码</th>
<th>类别</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>1XX</td>
<td>Informational（信息性状态码）</td>
<td>接收的请求正在处理</td>
</tr>
<tr>
<td>2XX</td>
<td>Success（成功状态码）</td>
<td>请求正常处理完毕</td>
</tr>
<tr>
<td>3XX</td>
<td>Redirection（重定向状态码）</td>
<td>需要进行附加操作以完成请求</td>
</tr>
<tr>
<td>4XX</td>
<td>Client Error（客户端错误状态码）</td>
<td>服务器无法处理请求</td>
</tr>
<tr>
<td>5XX</td>
<td>Server Error（服务器错误状态码）</td>
<td>服务器处理请求出错</td>
</tr>
</tbody>
</table>
<h3 id="31-避免返回纯文本">3.1 避免返回纯文本<a class="anchor" href="#31-避免返回纯文本">#</a></h3>
<p>API 返回的数据格式，不应该是纯文本，而应该是一个 JSON 对象，因为这样才能返回标准的结构化数据。所以，服务器回应的 HTTP 头的<code>Content-Type</code>属性要设为<code>application/json</code>。</p>
<p>客户端请求时，也要明确告诉服务器，可以接受 JSON 格式，即请求的 HTTP 头的<code>ACCEPT</code>属性也要设成<code>application/json</code>：</p>
<pre><code class="language-http">GET /orders/2 HTTP/1.1 
Accept: application/json
</code></pre>
<h3 id="32-提供链接">3.2 提供链接<a class="anchor" href="#32-提供链接">#</a></h3>
<p>API 的使用者未必知道，URL 是怎么设计的。一个解决方法就是，在回应中，给出相关链接，便于下一步操作。这样的话，用户只要记住一个 URL，就可以发现其他的 URL。这种方法叫做 HATEOAS。</p>
<h2 id="参考">参考<a class="anchor" href="#参考">#</a></h2>
<ol>
<li><a href="http://restful.p2hp.com/" 
  
   target="_blank" rel="noreferrer noopener" 
>RESTful 中文网</a>
</li>
<li><a href="https://www.ruanyifeng.com/blog/2011/09/restful.html" 
  
   target="_blank" rel="noreferrer noopener" 
>阮一峰-理解RESTful架构</a>
</li>
<li><a href="https://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html" 
  
   target="_blank" rel="noreferrer noopener" 
>阮一峰-RESTful API 最佳实践</a>
</li>
<li>上野宣. 图解 HTTP[M]. 人民邮电出版社, 2014.</li>
<li><a href="https://cyc2018.github.io/CS-Notes/#/notes/HTTP?id=%e5%9b%9b%e3%80%81http-%e9%a6%96%e9%83%a8" 
  
   target="_blank" rel="noreferrer noopener" 
>HTTP 首部字段</a>
</li>
<li><a href="https://developer.ibm.com/zh/technologies/spring/articles/j-lo-springhateoas" 
  
   target="_blank" rel="noreferrer noopener" 
>HATEOAS</a>
</li>
</ol>


              
          </article>
          

<ul class="tags__list">
    
    <li class="tag__item">
        <a class="tag__link" href="https://lil-q.github.io/tags/web/">web</a>
    </li></ul>

 <div class="pagination">
  
    <a class="pagination__item" href="https://lil-q.github.io/blog/mysql/">
        <span class="pagination__label">Previous Post</span>
        <span class="pagination__title">MySQL</span>
    </a>
  

  
    <a class="pagination__item" href="https://lil-q.github.io/blog/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">
      <span class="pagination__label">Next Post</span>
      <span class="pagination__title" >面向对象</span>
    </a>
  
</div>

          
          <footer class="post__footer">
            


<div class="social-icons">
  
     
    
  
     
    
      <a class="social-icons__link" rel="me" title="GitHub"
         href="https://github.com/lil-q"
         target="_blank" rel="noopener">
        <div class="social-icons__icon" style="background-image: url('https://lil-q.github.io/svg/github.svg')"></div>
      </a>
    
  
     
    
      <a class="social-icons__link" rel="me" title="Email"
         href="mailto:qitiantianc137@outlook.com"
         target="_blank" rel="noopener">
        <div class="social-icons__icon" style="background-image: url('https://lil-q.github.io/svg/email.svg')"></div>
      </a>
    
     
</div>

            <p>2019-2021 © lil-q</p>
          </footer>
          </div>
      </div>
      
      <div class="toc-container">
          
        <nav id="TableOfContents">
  <ul>
    <li><a href="#一概述">一、概述</a>
      <ul>
        <li><a href="#11-uri">1.1 URI</a></li>
        <li><a href="#12-如何理解-restful">1.2 如何理解 RESTful</a></li>
      </ul>
    </li>
    <li><a href="#二请求">二、请求</a></li>
    <li><a href="#三响应">三、响应</a>
      <ul>
        <li><a href="#31-避免返回纯文本">3.1 避免返回纯文本</a></li>
        <li><a href="#32-提供链接">3.2 提供链接</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>
      </div>
      
    </div>
    

  </main>

   

  
  <script src="/js/index.min.49e4d8a384357d9b445b87371863419937ede9fa77737522ffb633073aebfa44.js" integrity="sha256-SeTYo4Q1fZtEW4c3GGNBmTft6fp3c3Ui/7YzBzrr&#43;kQ=" crossorigin="anonymous"></script>
  
  
  <script src="https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js"></script>

  
  <script src="https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"
    data-autoloader-path="https://unpkg.com/prismjs@1.20.0/components/"></script>

  
    <script src="/js/table-of-contents.js"></script>
  


</body>

</html>
